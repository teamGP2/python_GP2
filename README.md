# python_GP2
# **Бизнес-контекст**

К нам обращается представитель компании, разрабатывающей фуд-сервис – мобильное приложение с рецептами. У компании возникла проблема: на данный момент у них есть платформа с большим количеством рецептов, но нет понимания пользовательских предпочтений. Средняя оценка по рецептам достигает лишь 3.9 и только 100 рецептов из 1000 имеют среднюю оценку >= 4.5. Компания хочет разработать новые собственные уникальные рецепты, чтобы вовлечь пользователей. Ей необходимо узнать, что влияет на высокую итоговую оценку блюда для того, чтобы предсказывать оценку рецептов и разрабатывать только те, которые включают комбинации наиболее важных характеристик, влияющих на высокий рейтинг разработанного блюда. Целевое значение средней оценки по новым рецептам 4.3.  

В нашем проекте перед нами стоят следующие **цели**: 
•	Определить, какие параметры рецепта (время, сложность, ингредиенты) наиболее сильно влияют на пользовательские оценки 
•	Выявить оптимальные диапазоны времени готовки, сложности, питательности для максимизации оценки
•	Обнаружить паттерны и комбинации, которые значительно влияют на привлекательность рецепта

**Целевой переменной является средний рейтинг рецепта, так как именно его точность предсказания и определяет успех всего проекта. **

# **Шаги проекта**


**API**

С сайта https://spoonacular.com/food-api/console#Dashboard берутся около 600 рецептов, набранных по разных характеристикам с деталями по каждому из рецептов.  На сайте нет общедоступного API, поэтому для сбора данных необходимо использование API-ключа. 

В api.py сделаны 8 запросов:
1.	Search Recipes с параметрами cuisine = ‘Italian’, number = 200
2.	Search Recipes с параметрами cuisine = ‘Mexican’, number = 200
3.	Search Recipes с параметрами cuisine = ‘Chinese’, number = 200
4.	Search Recipes с параметрами maxReadyTime = 30 , number = 200
5.	Search Recipes by Nutrients c параметрами maxCalories = 300, number = 200
6.	Search Recipes by Ingredients c параметрами ingredients = ‘chicken’, number = 200
7.	Get Random Recipes с параметром number = 300
8.	Get Recipe Information Bulk для всех id взятых рецептов 
Во избежании ошибок в обработке полученных данных, они сохранены в json файл data.json

В recipes_to_json.py обработаны рецепты и детали по ним, оставлены только необходимые признаки в новом формате. Это:  
1.	‘id’ – id номер рецепта, вещественный признак
2.	‘title’ – название рецепта, текстовый признак
3.	‘readyInMinutes’ – время приготовления рецепта, вещественный признак
4.	‘vegetarian’ – является ли вегетарианским, бинарный признак
5.	‘veryPopular’ – является ли очень популярным, бинарный признак
6.	‘healthScore’ – оценка здоровости рецепта по шкале от 1 до 100, вещественный признак
7.	‘pricePerServing’ – стоимость одной порции блюда, вещественный признак
8.	‘ingredients’ – список названий ингредиентов, текстовый признак 

Итоговые репецепты с деталями записаны в result_recipes.json


**Parsing**

Проходимся по 597 рецептам, полученных с API и ищем для них отзывы. 
С помощью Selenium открываем сайт и ищем в поиске этот рецепт по первым 3 словам, берем первый результат, прокручиваем страницу вниз и берем отзывы, если там их много то отображаются первые 20, поэтому нажимаем кнопку load more.
После этого записываем ещё 20 отзывов и так далее, пока не соберем 100 отзывов или они не закончатся.
Тк Selenium открывает каждый поиск новый процесс, что приводит к зависанию ПК, то после перехода к новому отзыву "убиваем" старые процессы chrome(селениум работает под видом браузера хром) и записываем всё в csv файл размером 5x32000, 5 столбцов TITLE, USER, STARS, TEXT, DATE - название рецепта, имя польззователя, который оставил отзыв,оценку которую он оставил, текст самого отзыва и дата отзыва


**EDA**

**Univariate Analysis**

*1.	text*

На основе анализа негативных отзывов по трем ключевым категориям - проблемы с ингредиентами, пропорциями/вкусом и временем - можно сформулировать следующие общие рекомендации для разработки новых рецептов:
Основной приоритет - контроль текстуры и влажности. Наибольшее количество жалоб связано с водянистыми соусами, сухими и жесткими блюдами. Это требует тщательного тестирования поведения ингредиентов при термообработке, использования точных временных параметров приготовления в зависимости от мощностей приборов и добавления элементов, сохраняющих сочность.
Критически важна сбалансированность вкусового профиля. Жалобы на бесвкусность, пересол и излишнюю остроту указывают на необходимость четкой системы дозировки специй и соли. Целесообразно предлагать адаптируемые уровни вкуса - от базового до интенсивного, с возможностью поэтапного добавления приправ в процессе приготовления.
Требуется оптимизация сложности рецептов и необходима повышенная точность формулировок. Для предотвращения проблем с пропорциями важно указывать точные меры ингредиентов в граммах и миллилитрах, избегая субъективных описаний. Особое внимание следует уделять работе с ингредиентами, склонными к нарушению текстуры - сырами, крупами, мясными продуктами.
Стоит избегать слишком долгих по времени приготовления рецептов, в также грамотно высчитывать время готовки, учитывая возможные различия в параметрах приборов.
Реализация этих рекомендаций позволит системно устранить основные причины негативных отзывов и повысить удовлетворенность пользователей готовыми рецептамими
Удаление признаков
Поскольку столбцы review_count, id, date не несут информации для дальнейшего анализа (в столбце review_count все значения равны 100, столбец id дублирует title), мы удалили их из датасета.
Далее мы группируем датасет по названию рецепта и используем агрегирующую функцию mean() для расчета среднего рейтинга по всем отзывам для каждого блюда.

**Univariate Analysis**
•	Анализ названия блюд
Выводы:
1.	Доминирование базовых ингредиентов - слова "chicken", "cheese", "rice" указывают на большое количество рецептов из простых и доступных продуктов в кулинарии.
2.	Также можно отметить преобладание коротких, простых слов, это говорит о том, что названия рецептов ориентированы на быстрое понимание и доступность
3.	Отсутствие сложной терминологии - в топе нет специализированных кулинарных терминов, что делает рецепты более доступными для широкой аудитории
4.	Преобладание полезной пищи - наличие таких слов как "salad", "bean", "rice" свидетельствует о распространенности здорового питания и сбалансированных блюд.
Этот график показывает, что наиболее большинство рецептов имеют простые, понятные названия с акцентом на основные ингредиенты, что делает их привлекательными для домашнего приготовления.

*•	Анализ времени приготовления*
Выводы:
Проанализировав данные, мы видим чёткий тренд: большинство рецептов требуют на приготовление до 45 минут. Этого достаточно, чтобы приготовить полноценное и вкусное блюдо, поэтому получается, что 45 минут — это идеальный баланс между вкусом и практичностью.

*•	Анализ бинарных признаков*
Выводы:
1.	3,2% блюд являются очень популярными - лишь небольшая часть рецептов получает статус "очень популярных". Соответственно, на сайте есть несколько топовых рецептов, которые являются оптимальными для пользователей, однако большинство рецептов приложения не так сильно привлекают внимание пользователей. Скорее всего, они не являются достаточно оптимальными для домашней готовки, поэтому остаются в тени.
2.	71,7% блюд не вегетарианские - традиционные блюда с мясом/рыбой преобладают над вегетарианскими.
3.	Нишевость вегетарианских рецептов - несмотря на хорошее качество, они составляют меньшинство в общей базе

*•	Анализ коэффициента полезности блюда*
Выводы:
1.	Из графика видно, что в приложении преобладают рецепты с низким показателем полезности. Это можно объяснить тем, что менее полезная пища часто кажется пользователям более привлекательной и вкусной.
2.	Однако сайт предлагает немалое количество блюд, имеющих максимальный коэффициент полезности, что можно объяснить тенденцией на здоровый образ жизни.
3.	Исходя из анализа боксплота, в основном показатель HealthScore принимает значения от 8 до 44,5, что говорит о распространенности более неполезных блюд.

*•	Анализ стоимости порции блюда*
Выводы:
1.	Концентрация в бюджетном сегменте — большинство рецептов имеют стоимость порции ниже 300 рублей, что демонстрирует ориентацию базы на доступное питание.
2.	Умеренная ценовая вилка — 50% всех рецептов сосредоточены в диапазоне от 105 до 280 рублей за порцию, что отражает сбалансированность ценового предложения.
3.	Широкий ценовой охват — наличие рецептов как бюджетной категории (от 10 рублей), так и премиального сегмента (до 1700 рублей) обеспечивает разнообразие выбора для разных потребительских возможностей.
4.	Практическая ориентированность — медианное значение 191 рубль подтверждает, что база рецептов в основном состоит из экономически доступных вариантов для повседневного приготовления.

*•	Анализ состава блюд*
Выводы:
1.	Статистическое преобладание базовых продуктов — высокая частотность таких ингредиентов, как оливковое масло, соль, чеснок, перец и растительное масло, отражает их фундаментальную роль в кулинарной базе сайта*. Эти продукты составляют основу большинства представленных рецептов.
2.	Универсальность применения — преобладание ингредиентов, которые являются межкухонными и подходят для различных стилей приготовления, показывает ориентацию базы рецептов на широкую аудиторию с разными вкусовыми предпочтениями.
3.	Доступность как ключевой принцип — популярные ингредиенты отличаются легкой доступностью и не требуют специальных поисков, что делает базу рецептов практичной и удобной для ежедневного использования.
4.	Кулинарная прагматикa — состав топа ингредиентов демонстрирует, что коллекция рецептов в основном состоит из блюд, основанных на простых, основном состоит из блюд, основанных на простых, проверенных и легко доступных продуктах, что соответствует запросу на понятные и воспроизводимые кулинарные решения.

*•	Анализ рейтинга рецептов*
Выводы:
1.	Концентрация высоких оценок — подавляющее большинство рецептов имеют рейтинги в диапазоне 4.5-4.8 баллов, что демонстрирует высокое общее качество кулинарной базы.
2.	Стабильность пользовательского опыта — 50% всех оценок сосредоточены в узком интервале между 4.54 и 4.78, что свидетельствует о предсказуемости и надежности результатов приготовления.
3.	Единые стандарты качества — минимальное количество низких оценок и смещенное вверх распределение подтверждают удовлетворенность пользователей представленными рецептами.
4.	Сбалансированность оценок — сочетание высокой медианы (4.66) с умеренным разбросом оценок отражает согласованность пользовательских ожиданий с конечным результатом приготовления.

**Multivariate Analysis**
Целевая переменная – рейтинг рецепта
•	Анализ зависимостей между вегетарианством, популярностью блюда и временем приготовления, ценой и показателем полезности не выявил каких -то явных зависимостей, соответственно, вегетарианство и популярность в совокупности с другими параметрами не влияют на рейтинг рецептов и их можно не учитывать при разработке рецептов.
•	Анализ зависимости рейтинга от категории блюда
Выводы:
1.	Лидеры по качеству — салаты и рыбные блюда демонстрируют наивысшие оценки пользователей (4.705 и 4.697 соответственно), что свидетельствует о стабильно высоком качестве этих категорий.
2.	Массовые предпочтения — мясные блюда составляют ядро кулинарной базы (108 рецептов), подтверждая их традиционную популярность, однако их средний рейтинг несколько ниже лидеров (4.621).
3.	Ценовая диспропорция — рыбные блюда значительно дороже других категорий (550 рублей за порцию), что может быть связано с стоимостью морепродуктов, но не мешает им получать высокие оценки.
4.	Баланс пользы и вкуса — салаты и рыбные блюда лидируют не только по рейтингу, но и по показателям здоровья (54.7 и 61.7), доказывая возможность сочетания вкусовых качеств и пользы.
5.	Экономичные категории — десерты и выпечка предлагают наиболее доступные варианты (118 и 148 рублей) при сохранении достойного качества.
6.	Пользователи одинаково высоко ценят как легкие и полезные блюда (салаты, рыба), так и традиционные мясные рецепты, формируя сбалансированную кулинарную экосистему с разнообразными ценовыми и временными вариантами.

*•	Анализ зависимости рейтинга от времени приготовления*
Выводы:
Из графика можно сделать вывод, что для времени приготовления 15 минут концентрация более высоких оценок значительно выше, что свидетельствует о популярности быстрых рецептов среди пользователей. Следовательно, в приложение стоит добавлять больше быстрых и простых рецептов, так как они больше привлекают пользователей и получают более высокие оценки. Для времени приготовления от 30 до 60 минут медиана значений расположена выше, что говорит о надежности таких рецептов.

*•	Анализ показателя полезности блюда*
Выводы:
Анализируя график, можно сделать вывод, что почти все блюда с высоким показателем полезности имеют стабильно высокий рейтинг. А с уменьшением показателя полезности оценки пользователей имеют больший разброс. Соответственно, в приложение стоит добавлять больше рецептов с высоким коэффициентов полезности.

*•	Анализ стоимости порции*
Выводы:
1.	Бюджетный сегмент — стабильное качество — блюда стоимостью от 0 до 900 рублей демонстрируют устойчиво высокий рейтинг, что подтверждает их надежность и соответствие ожиданиям пользователей.
2.	Премиум-сегмент — максимальное удовлетворение — рецепты ценой от 900 до 1500 рублей показывают наивысшие оценки, что свидетельствует об оправданности затрат на качественные ингредиенты и сложные техники приготовления.
3.	Элитный сегмент — завышенные ожидания — блюда стоимостью от 1500 до 1800 рублей получают наиболее низкие оценки, вероятно, из-за несоответствия цены и получаемого вкусового опыта.
*•	Анализ состава блюд*
Выводы:
Количество ингредиентов практически не влияет на рейтинг блюд — сложные рецепты не получают более высоких оценок. Наблюдается даже слабая отрицательная корреляция: с ростом числа компонентов оценки слегка снижаются. Это говорит о том, что пользователи ценят не многосоставность, а сбалансированность вкуса и доступность приготовления. Успех рецепта определяется качеством, а не количеством.

*•	Анализ зависимости рейтинга от показателя полезности и цены за порцию*
Выводы:
Из графика можно сделать вывод, что наиболее высокие оценки (4.7 - 5.0) получают блюда с низким показателем полезности и относительно низкой средней ценой за порцию. Соответственно, если в приложение добавляется рецепт с низким показателем полезности (<50), цена за порцию должна быть так же достаточно низкой (<400 руб). Это можно объяснить тем, что пользователи не готовы переплачивать за продукты для приготовления неполезной еды.

























<img width="468" height="720" alt="image" src="https://github.com/user-attachments/assets/2f3b5932-ac92-45e2-8667-3fdded468c91" />
