# Python GP2

## **Бизнес-контекст**

К нам обращается представитель компании, разрабатывающей фуд-сервис – мобильное приложение с рецептами. У компании возникла проблема: на данный момент у них есть платформа с большим количеством рецептов, но нет понимания пользовательских предпочтений. 

**Текущая ситуация:**
*   Средняя оценка по рецептам достигает лишь 3.9
*   Только 100 рецептов из 1000 имеют среднюю оценку >= 4.5

**Цель компании:**  
Разработать новые собственные уникальные рецепты, чтобы вовлечь пользователей и достичь целевого значения средней оценки **4.3** по новым рецептам.

## **Цели проекта**

*   Определить, какие параметры рецепта (время, сложность, ингредиенты) наиболее сильно влияют на пользовательские оценки
*   Выявить оптимальные диапазоны времени готовки, сложности, питательности для максимизации оценки
*   Обнаружить паттерны и комбинации, которые значительно влияют на привлекательность рецепта

**Целевая переменная:** средний рейтинг рецепта

## **Шаги проекта**

### **API**

*   **Источник данных:** https://spoonacular.com/food-api/console#Dashboard
*   **Объем данных:** около 600 рецептов
*   **Метод сбора:** использование API-ключа

**Выполненные запросы в `api.py`:**

1.  Search Recipes с параметрами `cuisine = 'Italian', number = 200`
2.  Search Recipes с параметрами `cuisine = 'Mexican', number = 200`
3.  Search Recipes с параметрами `cuisine = 'Chinese', number = 200`
4.  Search Recipes с параметрами `maxReadyTime = 30, number = 200`
5.  Search Recipes by Nutrients с параметрами `maxCalories = 300, number = 200`
6.  Search Recipes by Ingredients с параметрами `ingredients = 'chicken', number = 200`
7.  Get Random Recipes с параметром `number = 300`
8.  Get Recipe Information Bulk для всех id взятых рецептов

**Результат:** данные сохранены в json-файл `data.json`

### **Обработка данных**

В `recipes_to_json.py` обработаны рецепты и детали, оставлены только необходимые признаки:

**Признаки:**

*   `id` – id номер рецепта (вещественный)
*   `title` – название рецепта (текстовый)
*   `readyInMinutes` – время приготовления (вещественный)
*   `vegetarian` – является ли вегетарианским (бинарный)
*   `veryPopular` – является ли очень популярным (бинарный)
*   `healthScore` – оценка здоровости рецепта по шкале от 1 до 100 (вещественный)
*   `pricePerServing` – стоимость одной порции блюда (вещественный)
*   `ingredients` – список названий ингредиентов (текстовый)

**Результат:** рецепты записаны в `result_recipes.json`

### **Parsing**

*   **Метод:** Selenium
*   **Объем:** 597 рецептов
*   **Процесс:**
    *   Открываем сайт и ищем рецепт по первым 3 словам
    *   Берем первый результат
    *   Прокручиваем страницу вниз и собираем отзывы
    *   При наличии большого количества отзывов нажимаем кнопку "load more"
    *   Собираем до 100 отзывов на рецепт

**Структура данных:** CSV файл 5×32000

*   `TITLE` – название рецепта
*   `USER` – имя пользователя
*   `STARS` – оценка
*   `TEXT` – текст отзыва
*   `DATE` – дата отзыва

### **EDA**

#### **Univariate Analysis**

**Текст отзывов**  
На основе анализа негативных отзывов выявлены ключевые проблемы:

*   Контроль текстуры и влажности (водянистые соусы, сухие блюда)
*   Сбалансированность вкусового профиля (бесвкусность, пересол, острота)
*   Оптимизация сложности рецептов и точность формулировок
*   Избегание долгих по времени приготовления рецептов

**Удаленные признаки:**

*   `review_count` – все значения равны 100
*   `id` – дублирует title
*   `date` – не несет информационной ценности

**Анализ названий блюд:**

*   Доминирование базовых ингредиентов ("chicken", "cheese", "rice")
*   Преобладание коротких, простых слов
*   Отсутствие сложной терминологии
*   Ориентация на быстрое понимание и доступность

**Анализ времени приготовления:**

*   Большинство рецептов требуют до 45 минут
*   45 минут – идеальный баланс между вкусом и практичностью

**Анализ бинарных признаков:**

*   3,2% блюд являются очень популярными
*   71,7% блюд не вегетарианские
*   Традиционные блюда с мясом/рыбой преобладают

**Анализ коэффициента полезности:**

*   Преобладают рецепты с низким показателем полезности
*   Наличие блюд с максимальным коэффициентом полезности
*   Основной диапазон: 8-44,5 баллов

**Анализ стоимости порции:**

*   Концентрация в бюджетном сегменте (ниже 300 рублей)
*   50% рецептов в диапазоне 105-280 рублей
*   Широкий ценовой охват (от 10 до 1700 рублей)
*   Медианное значение: 191 рубль

**Анализ состава блюд:**

*   Статистическое преобладание базовых продуктов
*   Универсальность применения ингредиентов
*   Ориентация на доступность и практичность

**Анализ рейтинга рецептов:**

*   Подавляющее большинство рецептов имеют рейтинги 4.5-4.8
*   50% оценок в интервале 4.54-4.78
*   Минимальное количество низких оценок
*   Медиана: 4.66

#### **Multivariate Analysis**

**Зависимости между признаками:**

*   Вегетарианство и популярность не влияют на рейтинг рецептов
*   Нет явных зависимостей с временем приготовления, ценой и показателем полезности

**Анализ по категориям блюд:**

*   **Лидеры:** салаты (4.705) и рыбные блюда (4.697)
*   **Массовые:** мясные блюда (108 рецептов, рейтинг 4.621)
*   **Ценовой сегмент:** рыбные блюда значительно дороже (550 рублей)
*   **Экономичные:** десерты (118 рублей) и выпечка (148 рублей)

**Зависимость рейтинга от времени приготовления:**

*   Рецепты на 15 минут получают наиболее высокие оценки
*   Время 30-60 минут обеспечивает стабильно высокий рейтинг

**Зависимость рейтинга от полезности:**

*   Блюда с высоким показателем полезности имеют стабильно высокий рейтинг
*   С уменьшением полезности возрастает разброс оценок

**Зависимость рейтинга от стоимости:**

*   **Бюджетный сегмент (0-900 руб):** стабильно высокий рейтинг
*   **Премиум-сегмент (900-1500 руб):** наивысшие оценки
*   **Элитный сегмент (1500-1800 руб):** наиболее низкие оценки

**Зависимость от состава блюд:**

*   Количество ингредиентов практически не влияет на рейтинг
*   Слабая отрицательная корреляция с ростом числа компонентов

**Зависимость рейтинга от полезности и цены:**

*   Наиболее высокие оценки получают блюда с низкой полезностью и относительно низкой ценой
*   Пользователи не готовы переплачивать за неполезную еду
